(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{236:function(t,e,s){"use strict";s.r(e);s(63),s(64);var n=s(245),a=s(42),i=s(270),r=s(11),c=s(246),o=s(247),l=s(7);function m(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function u(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var d={name:"Recommend",mixins:[c.a],data:()=>({banner:[],result:[],current:0,newList:[],nowIndex:-1,type:0}),components:{BaseScroll:a.a,BaseList:i.a},created(){this._getNewSong(),this._getRecommend(),this._getLunbo(),this.navObj=l.b},methods:function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?m(Object(s),!0).forEach((function(e){u(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):m(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({async _getLunbo(){const{banners:t}=await Object(n.q)();this.banner=t},handlePlaylist(t){const e=t.length>0?"60px":0;this.$refs.recommend.style.bottom=e},onChange(t){this.current=t},selectSongItem(t,e){this.nowIndex=e,this.selectPlay({list:this.newList,index:e})},async _getNewSong(){const{data:t,code:e}=await Object(n.g)(this.type);if(200===e){const e=t.slice(0,10);this.newList=this._nomalize(e)}},_nomalize:t=>t.map(t=>{if(t.album&&t.artists)return Object(o.a)({id:t.id,name:t.name,mid:t.album.id,singer:t.artists[0].name,album:t.album.name,image:t.album.picUrl,duration:t.duration/1e3})}),async _getRecommend(){const{result:t}=await Object(n.i)();let e=[],s=t.slice(0,3),a=t.slice(3);e.push(s,a),this.result=e},selectItem(t){this.$router.push({path:"/recommend/".concat(t.id)}),this.setDisc(t)},loadImage(){this.checkloaded||(this.checkloaded=!0,this.$refs.recommendContent.refresh())}},Object(r.d)({setDisc:"SET_DISC"}),{},Object(r.b)(["selectPlay"]))},v=(s(274),s(8)),b=Object(v.a)(d,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"recommend",staticClass:"recommend"},[s("base-scroll",{ref:"recommendContent",staticClass:"recommend-content",attrs:{data:t.newList}},[s("div",[t.banner.length?s("van-swipe",{attrs:{autoplay:3e3,"indicator-color":"white"}},t._l(t.banner,(function(e,n){return s("van-swipe-item",{key:n},[s("img",{staticClass:"img",attrs:{width:"100%",src:e.pic,alt:""},on:{load:t.loadImage}})])})),1):t._e(),t._v(" "),s("div",{staticClass:"sub"},[t._l(this.navObj,(function(e,n){return[s("router-link",{key:n,staticClass:"sub-item",attrs:{to:e.path,tag:"div"}},[s("img",{staticClass:"sub-img",attrs:{src:e.imgUrl,alt:""}}),t._v(" "),s("p",{staticClass:"sub-title"},[t._v(t._s(e.title))])])]}))],2),t._v(" "),s("div",{staticClass:"recommend-list"},[s("h5",{staticClass:"title"},[t._v("热门歌单推荐")]),t._v(" "),s("div",{staticClass:"recommend-sub-title"},[s("h3",{staticClass:"good-listen-title"},[t._v("为你精挑细选")]),t._v(" "),s("router-link",{staticClass:"moretext",attrs:{tag:"div",to:"/list"}},[t._v("查看更多")])],1),t._v(" "),s("van-swipe",{attrs:{autoplay:5e3,"stop-propagation":!1},on:{change:t.onChange}},[t._l(t.result,(function(e,n){return s("van-swipe-item",{key:n},[s("base-list",{key:n,attrs:{list:e},on:{select:t.selectItem}})],1)})),t._v(" "),s("div",{staticClass:"custom-indicator",attrs:{slot:"indicator"},slot:"indicator"},[t._v(t._s(t.current+1)+"/2")])],2),t._v(" "),s("div",{staticClass:"selection"},[s("h5",{staticClass:"title"},[t._v("风格推荐")]),t._v(" "),s("div",{staticClass:"recommend-sub-title"},[s("h3",{staticClass:"good-listen-title"},[t._v("好听的话语歌曲精选")])]),t._v(" "),t._l(t.newList,(function(e,n){return s("div",{key:n,staticClass:"song-select",on:{click:function(s){return t.selectSongItem(e,n)}}},[s("img",{staticClass:"song-img",attrs:{src:e.image,alt:""}}),t._v(" "),s("div",{staticClass:"sub-song"},[s("div",{staticClass:"songs-name"},[s("span",{staticClass:"songs-title"},[t._v(t._s(e.name))]),t._v(" "),s("span",{staticClass:"singer-name"},[t._v(t._s(e.singer))])]),t._v(" "),s("div",{staticClass:"play"},[s("span",{staticClass:"iconfont iconbofang2",class:{playShow:t.nowIndex===n}}),t._v(" "),s("span",{staticClass:"iconfont iconbofang3",class:{active:t.nowIndex===n}})])])])}))],2)],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.result.length,expression:"!result.length"}],staticClass:"loading-container"},[s("van-loading",{attrs:{type:"spinner",color:"#1989fa"}},[t._v("加载中...")])],1)],1)]),t._v(" "),s("transition",{attrs:{name:"fade"}},[s("router-view")],1)],1)}),[],!1,null,"5929ecf3",null);e.default=b.exports},250:function(t,e,s){},274:function(t,e,s){"use strict";var n=s(250);s.n(n).a}}]);
//# sourceMappingURL=11.46161ef6.js.map