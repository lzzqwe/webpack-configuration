{"version":3,"sources":["webpack:///./src/components/TopList/TopList.vue?c095","webpack:///src/components/TopList/TopList.vue","webpack:///./src/components/TopList/TopList.vue?4073","webpack:///./src/components/TopList/TopList.vue"],"names":["component","_h","this","$createElement","_self","_c","attrs","title","bgImage","songlist"],"mappings":"8GAAA,I,yXCaA,ICbmP,EDanP,CACE,KAAF,UACE,UACE,KAAJ,iBAEE,OACE,MAAJ,CACM,SAAN,GACM,IAAN,kCAGE,S,+VAAF,EACI,QACE,OAAN,mBAEI,UACE,OAAN,qBACA,uBAEA,KAGA,0BAEE,QAAF,CACI,sBACJ,uBACQ,KAAR,sBAEM,MAAN,KAAQ,EAAR,SAAQ,SAAR,sBACA,SACQ,KAAR,mBAGI,qBAAJ,GACM,MACN,EADA,mBAAQ,IAAR,GAAU,GAAV,EAAQ,OAAR,IACA,QA7CY,MA8CZ,MAAQ,SAAR,eACA,YAAQ,IAAR,GAAU,EAAV,KAAU,EAAV,GAAU,EAAV,GAAU,EAAV,GAAU,GAAV,EACQ,OAAR,aACU,KACA,IAAV,KACU,OAAV,UACU,OACA,MAAV,OACU,SAAV,MACU,MAAV,aAIM,KAAN,aAGE,WAAF,CACI,UAAJ,M,OE5DIA,EAAY,YACd,GHRW,WAAa,IAAiBC,EAATC,KAAgBC,eAAuC,OAAvDD,KAA0CE,MAAMC,IAAIJ,GAAa,aAAa,CAACK,MAAM,CAAC,MAAtFJ,KAAkGK,MAAM,QAAxGL,KAAsHM,QAAQ,MAA9HN,KAA0IO,cACtJ,IGUpB,EACA,KACA,WACA,MAIa,UAAAT,E","file":"js/14.d8410fb7.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('music-list',{attrs:{\"title\":_vm.title,\"bgImage\":_vm.bgImage,\"songs\":_vm.songlist}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <music-list :title='title' :bgImage='bgImage' :songs='songlist'></music-list>\r\n</template>\r\n<script>\r\nconst MAX = 500\r\nimport MusicList from 'base/MusicList/MusicList.vue'\r\n\r\nimport { getTopDetail,getSongDetail } from 'api/index.js'\r\n\r\nimport { mapGetters } from 'vuex'\r\n\r\nimport { createSong } from 'common/js/song'\r\n\r\nexport default {\r\n    name: 'TopList',\r\n    created() {\r\n        this._getTopDetail()\r\n    },\r\n    data() {\r\n        return {\r\n            songlist: [],\r\n            idx: parseInt(this.$route.params.id)\r\n        }\r\n    },\r\n    computed: {\r\n        title() {\r\n            return this.topList.name\r\n        },\r\n        bgImage() {\r\n            if (this.songlist.length) {\r\n                return this.songlist[0].image\r\n            } else {\r\n                return ''\r\n            }\r\n        },\r\n        ...mapGetters(['topList'])\r\n    },\r\n    methods: {\r\n        async _getTopDetail() {\r\n            if (!this.$route.params.id) {\r\n                this.$router.push('/rank')\r\n            }\r\n            const { code, playlist } = await getTopDetail(this.idx)\r\n            if (code === 200) {\r\n              this._nomalizeSongs(playlist)\r\n            }\r\n        },\r\n        async _nomalizeSongs(list) {\r\n            const trackIds = list.trackIds.map(({ id }) => id)\r\n            const copyTrackIds = trackIds.slice(0, MAX)\r\n            const { songs } = await getSongDetail(copyTrackIds)\r\n            const songList = songs.map(({ id, name, ar, al, dt }) => {\r\n                return createSong({\r\n                    id,\r\n                    mid: al.id,\r\n                    singer: ar[0].name,\r\n                    name,\r\n                    album: al.name,\r\n                    duration: dt / 1000,\r\n                    image: al.picUrl\r\n                })\r\n            })\r\n\r\n            this.songlist = songList\r\n        },\r\n    },\r\n    components: {\r\n        MusicList\r\n    }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n</style>","import mod from \"-!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js?cacheDirectory!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./TopList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js?cacheDirectory!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./TopList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TopList.vue?vue&type=template&id=78b9d1fe&scoped=true&\"\nimport script from \"./TopList.vue?vue&type=script&lang=js&\"\nexport * from \"./TopList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"78b9d1fe\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}